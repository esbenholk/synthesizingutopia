(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{592:function(e,s,t){Promise.resolve().then(t.bind(t,8304))},8304:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return r}});var l=t(7437),a=t(2265);t(5660);let n=e=>{let{url:s,title:t}=e;return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("div",{children:(0,l.jsx)("img",{src:s,alt:t})}),(0,l.jsx)("div",{className:"Info",children:(0,l.jsx)("p",{children:t})})]})};function o(e){let{news:s}=e;return(0,l.jsx)(l.Fragment,{children:s.length>0&&(0,l.jsx)(l.Fragment,{children:s.map((e,s)=>(0,l.jsx)("div",{className:"Card",children:(0,l.jsx)(n,{url:e.url,title:e.title})},s))})})}function i(){let[e,s]=(0,a.useState)(null),[t,n]=(0,a.useState)(""),[i,r]=(0,a.useState)(!1),[c,d]=(0,a.useState)(!1),[u,m]=(0,a.useState)(!1),[p,g]=(0,a.useState)(!1),[h,x]=(0,a.useState)(null),[j,v]=(0,a.useState)([]),[f,y]=(0,a.useState)(""),[w,N]=(0,a.useState)(!1),[b,k]=(0,a.useState)(!1),[C,S]=(0,a.useState)(""),[F,_]=(0,a.useState)([]),[E,U]=(0,a.useState)(0);(0,a.useEffect)(()=>{console.log("renders comp"),B()},[]);let B=async()=>{await I()},I=async()=>{k(!0);try{let e=await fetch("/api/cloudinary/recent?skip=".concat(E,"limit=",10)),s=await e.json();if(console.log("has images",s,s.length),s){for(let e=0;e<s.length;e++){let t=s[e],l={title:t.title,url:t.url};F.push(l)}_(F),U(E+10)}else k(!1)}catch(e){S(e instanceof Error?e.message:"Failed to fetch recent images")}finally{k(!1)}},R=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1500;N(!0),setTimeout(()=>{N(!1)},e)},D=e=>e.join(", "),G=async()=>{if(r(!0),""!=t||j.length>0)try{let e=await fetch("/api/generateImage?prompt=".concat(encodeURIComponent(t||"utopias"),"&adjectives=").concat(encodeURIComponent(D(j)||""))),l=await e.json();if(console.log("data from gen",l),!e.ok)throw Error(l.error||"Generation failed");s(null),x(l.imageUrl),n(l.sentence)}catch(e){}finally{r(!1)}else S("wizard, u need to declare the generation"),r(!1)},L=async e=>{try{d(!0),console.log("uploads image file",e,t);let s=await fetch("/api/cloudinary/upload",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({imageUrl:e,sentence:t||"utopias",alt:t||"utopias",title:t||"utopias",tags:D(j)})});if(!s.ok){let e=await s.json();throw console.log("fails upload to cloud",e),d(!1),Error(e.error||"Upload failed")}F.push({title:t,url:e}),_(F),console.log(F)}catch(e){console.log("fails upload to cloud",e),d(!1)}finally{console.log("ends upload to cloud"),r(!1),d(!1),m(!1),R(),s(null),x(null)}},O=e=>{v(j.filter((s,t)=>t!==e))},P=async s=>{s.preventDefault(),r(!0),console.log("tries to submit image",e),e?L(e):h?L(h):console.log("make error message")};return(0,l.jsxs)("div",{className:"brew-container",children:[(0,l.jsx)("video",{className:p?"couldron openCouldronVideo":"couldron",src:"https://res.cloudinary.com/dmwpm8iiw/video/upload/v1741863927/loopcouldron_svu0rw.mp4",autoPlay:!0,loop:!0,muted:!0,playsInline:!0}),(0,l.jsxs)("div",{className:"GalleryContainer",children:[(0,l.jsx)(o,{news:F}),(0,l.jsx)("button",{disabled:b,onClick:()=>{I()},className:"Button Loadmore",children:b?"expanding...":"Get more utopias"})]}),(0,l.jsxs)("div",{className:"buttons",children:[(0,l.jsx)("button",{className:"btn ".concat(u?"lil":""),onClick:()=>{console.log("check error1",C),p?(g(!1),setTimeout(()=>{m(!0)},4e3)):m(!u),console.log("check error2",C)},children:"add vision"}),(0,l.jsx)("button",{className:"btn ".concat(u?"lil":""),onClick:()=>g(!p),children:"explore visions"})]}),(0,l.jsx)("img",{className:p?"overlay openCouldron":"overlay",src:"https://res.cloudinary.com/dmwpm8iiw/image/upload/v1741865808/couldronoverlay_bg8osp.png"}),(0,l.jsx)("div",{className:"desktopborder1"}),(0,l.jsx)("div",{className:"desktopborder2"}),u&&(0,l.jsx)(l.Fragment,{children:(0,l.jsx)("div",{className:"gooey-container",children:(0,l.jsx)("div",{className:c?"shrinkgoo gooey":" gooey"})})}),u&&(0,l.jsxs)(l.Fragment,{children:[""!=C&&(0,l.jsx)(l.Fragment,{children:(0,l.jsx)("div",{className:"errorMessage",onClick:()=>{S(""),r(!1)},children:(0,l.jsx)("p",{children:C})})}),(0,l.jsxs)("form",{onSubmit:P,className:c?"uploading uploader":"uploader",children:[(0,l.jsx)("button",{className:"closebtn",onClick:()=>m(!1),children:" X "}),(0,l.jsxs)("div",{className:""!=C?"textinputs error":"textinputs",children:[(0,l.jsx)("textarea",{id:"text",value:t,onChange:e=>n(e.target.value),placeholder:"in my utopia there is..."}),(0,l.jsx)("input",{type:"text",value:f,onChange:e=>y(e.target.value),onKeyDown:e=>{" "===e.key&&(e.preventDefault(),f.trim()&&(v([...j,f.trim()]),y("")))},className:"mt-2 p-2 border rounded-md",placeholder:"or add some adjectives"}),(0,l.jsx)("div",{className:"flex-row-wrap adjButtons",children:j.map((e,s)=>(0,l.jsxs)("button",{onClick:()=>O(s),className:"adjBtn",children:[e," âœ–"]},s))})]}),(0,l.jsx)("div",{className:"imageResult",children:i?(0,l.jsx)(l.Fragment,{children:(0,l.jsx)("img",{src:"https://res.cloudinary.com/dmwpm8iiw/image/upload/v1742059296/brewing_ruxhpm.gif"})}):e?(0,l.jsxs)("div",{children:[(0,l.jsx)("button",{className:"closebtn",onClick:()=>s(null),children:" X "}),(0,l.jsx)("img",{src:e,alt:"Preview",className:"subImage"})]}):h?(0,l.jsxs)("div",{children:[(0,l.jsx)("button",{className:"closebtn",onClick:()=>x(null),children:" X "}),(0,l.jsx)("img",{src:h,alt:"Generated",className:"w-full rounded-lg"})]}):null}),(0,l.jsxs)("div",{className:"uploaderButtons",children:[(0,l.jsx)("label",{htmlFor:"image-upload",className:i?"imgUploadBtn passive":"imgUploadBtn active",children:e?"change":"upload"}),(0,l.jsx)("input",{id:"image-upload",type:"file",accept:"image/*",onChange:e=>{var t;let l=null===(t=e.target.files)||void 0===t?void 0:t[0];if(l){let e=new FileReader;e.onloadend=()=>{s(e.result)},e.readAsDataURL(l)}},className:"sr-only"}),(0,l.jsx)("button",{disabled:i,className:i?"passive":"active",onClick:()=>G(),children:h?"regenerate":"generate"})]}),(0,l.jsx)("button",{type:"submit",className:i?"passive":h?"active":e?"active":"passive",children:i?"loading content":(0,l.jsx)(l.Fragment,{children:"poor into couldron"})})]})]}),w&&(0,l.jsxs)("div",{className:"success",children:[(0,l.jsx)("img",{src:"https://res.cloudinary.com/dmwpm8iiw/image/upload/v1742061490/giphy_knfko7.gif"}),(0,l.jsx)("p",{children:"*sympoetic thanx u*"})]})]})}function r(){let[e,s]=(0,a.useState)(0);return(0,a.useEffect)(()=>{let e=()=>{s(window.innerHeight)};return window.addEventListener("resize",e),console.log("renders page"),()=>{window.removeEventListener("resize",e)}},[]),(0,l.jsxs)("main",{className:"dont look under the hood",children:[(0,l.jsx)("img",{className:"logo",style:{maxWidth:e-50},src:"https://res.cloudinary.com/dmwpm8iiw/image/upload/v1741868576/logo_efs6jc.gif"}),(0,l.jsx)(i,{})]})}},5660:function(){}},function(e){e.O(0,[152,971,117,744],function(){return e(e.s=592)}),_N_E=e.O()}]);